-- Initial functorrent.cabal generated by cabal init. For further documentation,
-- see http://haskell.org/cabal/users-guide/

name:                functorrent
version:             0.1.0.0
synopsis:            A Bit-torrent client
description:         A bittorrent client
license:             GPL-3
license-file:        LICENSE
author:              Ramakrishnan Muthukrishnan
maintainer:          ram@rkrishnan.org
-- copyright:
category:            Network
build-type:          Simple
extra-source-files:  README
cabal-version:       >=1.18

library
  exposed-modules:     FuncTorrent
                       FuncTorrent.Bencode,
                       FuncTorrent.Logger,
                       FuncTorrent.Metainfo,
                       FuncTorrent.Network
                       FuncTorrent.Peer,
                       FuncTorrent.Tracker
                       FuncTorrent.ControlThread
                       FuncTorrent.PeerThread
                       FuncTorrent.PeerThreadMain
                       FuncTorrent.PeerThreadData
                       FuncTorrent.ServerThread

  other-modules:       FuncTorrent.Utils
  other-extensions:    OverloadedStrings, CPP
  hs-source-dirs:      src
  ghc-options:         -Wall -fwarn-incomplete-patterns -fno-warn-orphans
  default-language:    Haskell2010
  build-depends:       base,
                       base16-bytestring,
                       binary,
                       bytestring,
                       containers,
                       cryptohash,
                       directory,
                       HTTP,
                       network,
                       network-uri,
                       parsec,
                       QuickCheck,
                       tasty,
                       tasty-hunit,
                       lens,
                       transformers

executable functorrent
  main-is:             Main.hs
  other-extensions:    OverloadedStrings
  hs-source-dirs:      src
  ghc-options:         -Wall -fwarn-incomplete-patterns -optc-Os -fno-warn-orphans
  default-language:    Haskell2010
  build-depends:       base,
                       base16-bytestring,
                       binary,
                       bytestring,
                       containers,
                       cryptohash,
                       directory,
                       HTTP,
                       QuickCheck,
                       network,
                       network-uri,
                       parsec,
                       lens,
                       transformers,
                       unix

test-suite functorrent-test
  type:              exitcode-stdio-1.0
  default-language:  Haskell2010
  hs-source-dirs:    test
  main-is:           Test.hs
  other-modules:     BencodeTests
  build-depends:     base,
                     functorrent,
                     bytestring,
                     containers,
                     directory,
                     doctest,
                     QuickCheck,
                     tasty,
                     tasty-hunit,
                     QuickCheck,
                     tasty-quickcheck,
                     test-framework-quickcheck2

test-suite control-thread-tests
  type:              exitcode-stdio-1.0
  default-language:  Haskell2010
  hs-source-dirs:    test,src
  main-is:           ControlThreadTestsMain.hs
  other-modules:     PeerThreadMock
                     ControlThreadTests
                     FuncTorrent.ControlThread
  ghc-options:       -Wall
  other-extensions:  CPP
  cpp-options:       -DPEER_THREAD_MOCKED
  build-depends:     base,
                     base16-bytestring,
                     binary,
                     bytestring,
                     containers,
                     cryptohash,
                     directory,
                     HTTP,
                     network,
                     network-uri,
                     parsec,
                     QuickCheck,
                     tasty,
                     tasty-hunit,
                     functorrent,
                     lens
